/* -------------------------------------------------------
ðŸ“œ Global Stylesheet â€” Rubicâ€™s Digital Solutions (v2)
Stack: Next.js + Tailwind + CSS variables
Cambios clave:
- Paleta LIGHT revisada (mejor contraste, azul de marca).
- Navbar sticky y por encima del hero.
- ImÃ¡genes protegidas de overlays y hover (card-media).
- Hero y Projects con viÃ±eta/gradientes sin opacidad global.
------------------------------------------------------- */

/* 1) Tailwind (debe ir arriba) */
@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

/* 2) Design tokens (modo LIGHT por defecto) */
:root {
  /* Base UI */         /* leve gris para contraste */
  --surface: #ffffff;            /* tarjetas blancas */         /* texto principal (muy oscuro) */

  /* Marca (light) â€” azul consistente */
  --primary: oklch(0.205 0 0);            /* blue-600 */
  --primary-hover: #1d4ed8;      /* blue-700 */
  --on-primary: #ffffff;         /* texto sobre primario */

  /* Navbar */
  --nav-bg: rgba(255,255,255,0.92);
  --nav-border: rgba(2, 6, 23, 0.08);  /* slate-950 @ 8% */

  /* Texto atenuado */
  --muted-foreground: oklch(0.556 0 0);        /* slate-600 */

  /* Bordes generales */
  --border: oklch(0.922 0 0);    /* slate-900 @ 10% */

  /* TipografÃ­as (si no asignas con next/font) */
  --font-sans: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Inter, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
  --font-display: var(--font-sans);
  --radius: 0.625rem;
  --background: oklch(1 0 0);
  --foreground: oklch(0.145 0 0);
  --card: oklch(1 0 0);
  --card-foreground: oklch(0.145 0 0);
  --popover: oklch(1 0 0);
  --popover-foreground: oklch(0.145 0 0);
  --primary-foreground: oklch(0.985 0 0);
  --secondary: oklch(0.97 0 0);
  --secondary-foreground: oklch(0.205 0 0);
  --muted: oklch(0.97 0 0);
  --accent: oklch(0.97 0 0);
  --accent-foreground: oklch(0.205 0 0);
  --destructive: oklch(0.577 0.245 27.325);
  --input: oklch(0.922 0 0);
  --ring: oklch(0.708 0 0);
  --chart-1: oklch(0.646 0.222 41.116);
  --chart-2: oklch(0.6 0.118 184.704);
  --chart-3: oklch(0.398 0.07 227.392);
  --chart-4: oklch(0.828 0.189 84.429);
  --chart-5: oklch(0.769 0.188 70.08);
  --sidebar: oklch(0.985 0 0);
  --sidebar-foreground: oklch(0.145 0 0);
  --sidebar-primary: oklch(0.205 0 0);
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.97 0 0);
  --sidebar-accent-foreground: oklch(0.205 0 0);
  --sidebar-border: oklch(0.922 0 0);
  --sidebar-ring: oklch(0.708 0 0);
}

/* 3) Fallback DARK por preferencia del sistema (si JS no corre) */
@media (prefers-color-scheme: dark) {
  :root {
    --surface: #111827;

    --primary: #00ff88;       /* Verde neon (dark) */
    --primary-hover: #00cc6a;
    --on-primary: #0a0a0a;

    --nav-bg: rgba(10, 10, 10, 0.6);
    --nav-border: rgba(255, 255, 255, 0.08);

    --muted-foreground: rgba(230, 230, 230, 0.75);

    --border: rgba(255, 255, 255, 0.08);
  }
}

/* 4) Overrides manuales via data-theme */
:root[data-theme="light"] {
  --background: #f7f8fa;
  --surface: #ffffff;
  --foreground: #0b1220;
  --primary: #2563eb;
  --primary-hover: #1d4ed8;
  --on-primary: #ffffff;
  --nav-bg: rgba(255,255,255,0.92);
  --nav-border: rgba(2, 6, 23, 0.08);
  --muted-foreground: #475569;
  --border: rgba(15, 23, 42, 0.10);

  /* HERO tokens mÃ¡s contrastados */
  --hero-bg-start: color-mix(in oklab, var(--primary) 18%, #ffffff);
  --hero-bg-end:   #ffffff;
  --hero-orbit:    color-mix(in oklab, var(--foreground) 55%, var(--primary) 30%);
  --hero-spark:    color-mix(in oklab, var(--foreground) 55%, var(--primary) 20%);
  --hero-vignette: rgba(0, 0, 0, 0.22);

  /* Portal (si lo usas) */
  --portal-bg-start: color-mix(in oklab, var(--primary) 15%, #ffffff 85%);
  --portal-bg-end:   color-mix(in oklab, #dbeafe 40%, #ffffff 60%);
}
:root[data-theme="dark"] {
  --background: #0a0a0a;
  --surface: #111827;
  --foreground: #e6e6e6;
  --primary: #00ff88;
  --primary-hover: #00cc6a;
  --on-primary: #0a0a0a;
  --nav-bg: rgba(10, 10, 10, 0.6);
  --nav-border: rgba(255, 255, 255, 0.08);
  --muted-foreground: rgba(230, 230, 230, 0.75);
  --border: rgba(255, 255, 255, 0.08);

  --hero-bg-start: color-mix(in oklab, var(--primary) 22%, #000000);
  --hero-bg-end:   color-mix(in oklab, var(--background) 88%, transparent);
  --hero-orbit:    color-mix(in oklab, var(--primary) 85%, #00ff88);
  --hero-spark:    color-mix(in oklab, var(--primary) 85%, #bffff0);
  --hero-vignette: rgba(0, 0, 0, 0.5);

  --portal-bg-start: color-mix(in oklab, var(--primary) 35%, #000000 65%);
  --portal-bg-end:   color-mix(in oklab, #0f172a 85%, #000000 15%);
}

/* 5) (Opcional) Mapear tokens a Tailwind v4 inline */
@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-sans);
  --color-sidebar-ring: var(--sidebar-ring);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar: var(--sidebar);
  --color-chart-5: var(--chart-5);
  --color-chart-4: var(--chart-4);
  --color-chart-3: var(--chart-3);
  --color-chart-2: var(--chart-2);
  --color-chart-1: var(--chart-1);
  --color-ring: var(--ring);
  --color-input: var(--input);
  --color-border: var(--border);
  --color-destructive: var(--destructive);
  --color-accent-foreground: var(--accent-foreground);
  --color-accent: var(--accent);
  --color-muted-foreground: var(--muted-foreground);
  --color-muted: var(--muted);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-secondary: var(--secondary);
  --color-primary-foreground: var(--primary-foreground);
  --color-primary: var(--primary);
  --color-popover-foreground: var(--popover-foreground);
  --color-popover: var(--popover);
  --color-card-foreground: var(--card-foreground);
  --color-card: var(--card);
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
}

/* 6) Base global */
html { scroll-behavior: smooth; }
body {
  font-family: var(--font-sans);
}

/* 7) Helpers rÃ¡pidos */
.text-brand { color: var(--primary); }
.bg-brand   { background-color: var(--primary); }
.border-soft{ border-color: var(--border); }
.bg-surface { background-color: var(--surface); }
.h-display  { font-family: var(--font-display); letter-spacing: -0.01em; }

/* 8) Botones */
.btn-primary{
  align-items:center; justify-content:center;
  padding: .375rem .75rem; border-radius: .5rem;
  background: var(--primary); color: var(--on-primary);
  transition: background-color .2s ease, filter .2s ease, box-shadow .2s ease;
  box-shadow: 0 1px 0 rgba(0,0,0,.06), 0 8px 16px -8px rgba(37,99,235,.35);
}
.btn-primary:hover{ background: var(--primary-hover); filter: saturate(1.05); }

.btn-ghost{
  display:inline-flex; align-items:center; justify-content:center;
  padding: .5rem .875rem; border-radius: .5rem;
  border: 1px solid var(--border); color: var(--foreground);
  backdrop-filter: blur(6px);
  transition: border-color .2s ease, background-color .2s ease;
}
.btn-ghost:hover{
  border-color: color-mix(in oklab, var(--foreground) 20%, var(--border));
}

/* 9) Navbar */
.navbar-header{
  position: sticky; top: 0; z-index: 50;
  background-color: var(--nav-bg);
  border-bottom: 1px solid var(--nav-border);
  backdrop-filter: saturate(1.2) blur(6px);
}
.logo-text{
  font-weight: 800; letter-spacing:.02em; color: var(--foreground);
  text-shadow: 0 0 .5px currentColor, 0 0 1px currentColor, 0 0 2px rgba(255,255,255,.15);
}
.logo-text:hover{ filter: drop-shadow(0 0 6px rgba(255,255,255,.25)); }
.logo-text--brand{
  background: linear-gradient(90deg, var(--primary), color-mix(in oklab, var(--primary) 65%, var(--foreground)));
  -webkit-background-clip:text; background-clip:text; color:transparent;
}
.logo-accent{ color: var(--primary); }

.nav-link{
  color: color-mix(in oklab, var(--foreground) 78%, transparent);
  text-decoration:none; position:relative; padding:4px 0;
  transition: color .2s ease;
}
.nav-link:hover{ color: var(--foreground); }
.nav-link::after{
  content:""; position:absolute; left:0; bottom:-2px; height:2px; width:0%;
  background: currentColor; opacity:.9; transition: width .2s ease;
}
.nav-link:hover::after{ width:100%; }
.nav-link--active{ color: var(--foreground); }
.nav-link--active::after{ width:100%; background: var(--primary); }

/* 10) Hero visuals (mesh + glow sutil) */
.bg-hero{
  background:
    radial-gradient(1200px 600px at 50% -10%, color-mix(in oklab, var(--primary) 24%, transparent), transparent 60%),
    linear-gradient(180deg, rgba(0,0,0,0) 0%, color-mix(in oklab, var(--foreground) 6%, transparent) 100%);
}
.hero-glow{ position:relative; }
.hero-glow::after{
  content:""; position:absolute; inset:-10% -5% 0 -5%;
  background: radial-gradient(600px 300px at 50% 0%, color-mix(in oklab, var(--primary) 35%, transparent), transparent 60%);
  filter: blur(30px); opacity:.45; pointer-events:none; z-index:-1;
}

/* 11) Mobile UX/seguridad */
html, body { overflow-x: hidden; }
img, svg, video, canvas {
  max-width:100%; height:auto; display:block;
}

/* 12) Icon buttons */
.icon-btn{
  align-items:center; justify-content:center;
  width:36px; height:36px; border-radius:10px;
  border:1px solid var(--nav-border); color:var(--foreground);
  background: color-mix(in oklab, var(--nav-bg) 75%, transparent);
  transition: border-color .2s, background-color .2s, transform .06s;
}
.icon-btn:active{ transform:scale(.98); }
.icon-btn.burger .burger-bar{
  display:block; position:relative; left:50%; transform:translateX(-50%);
  width:18px; height:2px; margin:2px 0; background:currentColor; border-radius:2px;
}

/* 13) MenÃº mÃ³vil */
.mobile-overlay{
  position:fixed; inset:0; z-index:40;
  background: color-mix(in oklab, var(--background) 30%, transparent);
  backdrop-filter: blur(4px);
}
.mobile-sheet{
  position:absolute; top:56px; left:0; right:0;
  background-color: var(--background);
  border-top:1px solid var(--nav-border);
}
.mobile-sheet .nav-link{ font-size:1.125rem; padding:10px 0; }
.close-wrap{ display:flex; justify-content:center; padding:8px 0 12px; }
.close-btn{
  position:relative; width:44px; height:44px; border-radius:12px;
  border:1px solid var(--nav-border);
  background: color-mix(in oklab, var(--nav-bg) 85%, var(--background));
  color:var(--foreground);
  transition: border-color .2s, background-color .2s, transform .06s;
}
.close-btn:active{ transform: scale(.98); }
.close-btn .x-bar{
  position:absolute; left:50%; top:50%;
  width:22px; height:3px; border-radius:2px; background:var(--foreground);
  transform-origin:center;
}
.close-btn .x-bar:nth-child(1){ transform: translate(-50%,-50%) rotate(45deg); }
.close-btn .x-bar:nth-child(2){ transform: translate(-50%,-50%) rotate(-45deg); }

/* 14) Accesibilidad */
@media (prefers-reduced-motion: reduce){
  .icon-btn, .btn-primary, .btn-ghost, .nav-link::after { transition: none !important; }
}

/* === TipografÃ­a utilitaria === */
.h1 { font-family: var(--font-display); font-weight:700; letter-spacing:-.02em; line-height:1.1;  font-size:2.25rem; }
.h2 { font-family: var(--font-display); font-weight:700; letter-spacing:-.02em; line-height:1.15; font-size:1.875rem; }
.h3 { font-family: var(--font-display); font-weight:600; letter-spacing:-.01em; line-height:1.2;  font-size:1.5rem; }
.h4 { font-weight:600; line-height:1.3;  font-size:1.25rem; }
.h5 { font-weight:600; line-height:1.35; font-size:1.125rem; }
.h6 { font-weight:600; line-height:1.4;  font-size:1rem; }
.text-body  { font-size:1rem;   line-height:1.65; }
.text-small { font-size:.875rem; line-height:1.5; opacity:.9; }

@media (min-width:768px){
  .h1 { font-size:3.25rem; }
  .h2 { font-size:2.25rem; }
  .h3 { font-size:1.75rem; }
}

/* === Icon links (footer/contact) === */
.icon-link{
  color: color-mix(in oklab, var(--foreground) 80%, transparent);
  display:inline-flex; align-items:center; justify-content:center;
  border:1px solid var(--nav-border); border-radius:.5rem; padding:.5rem;
  transition: color .18s, border-color .18s, background-color .18s, box-shadow .18s, transform .06s;
}
.icon-link:hover,.icon-link:focus-visible{
  color: var(--primary);
  border-color: color-mix(in oklab, var(--primary) 40%, var(--nav-border));
  background-color: color-mix(in oklab, var(--primary) 10%, transparent);
  outline:none;
  box-shadow: 0 0 0 3px color-mix(in oklab, var(--primary) 20%, transparent);
}
.icon-link:active{ transform: scale(.98); background-color: color-mix(in oklab, var(--primary) 16%, transparent); }
.icon-link > .lucide{ width:20px; height:20px; stroke-width:2; }

/* â€”â€”â€” Micro helpers visuales â€”â€”â€” */
.shadow-ambient{
  box-shadow: 0 0 0 1px var(--nav-border), 0 30px 60px -20px rgba(0,0,0,.35);
}
.card-hover{
  transition: transform .25s ease, box-shadow .25s ease, background-color .25s ease, border-color .25s ease;
  background-color: transparent; /* NO tinte sobre media */
}
.card-hover:hover{
  transform: translateY(-2px);
  box-shadow: 0 10px 30px -10px rgba(15,23,42,.25);
  border-color: color-mix(in oklab, var(--foreground) 16%, var(--nav-border));
}

/* === Protecciones para imÃ¡genes (clave del fix) === */
.card-media{ position:relative; isolation:isolate; }
.card-media img, .card-media video, .card-media canvas{
  display:block; width:100%; height:auto; object-fit:cover; border-radius:inherit;
  position:relative; z-index:1;          /* por encima de decorativos */
  mix-blend-mode: normal !important;
  filter:none !important;
  opacity:1 !important;
}

/* === Projects: Animations & Typewriter === */
@keyframes spin-slower { from {transform:rotate(0)} to {transform:rotate(360deg)} }
@keyframes orbit {
  0% { transform: rotate(0deg) translateX(140px) rotate(0deg); }
  50% { transform: rotate(180deg) translateX(140px) rotate(-180deg); }
  100% { transform: rotate(360deg) translateX(140px) rotate(-360deg); }
}
@keyframes float-y { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-8px)} }
@keyframes caret-blink { 0%, 49% { opacity: 1 } 50%, 100% { opacity: 0 } }
@keyframes shimmer-x { 0%{transform:translateX(-30%)} 100%{transform:translateX(130%)} }

.animate-spin-slower{ animation:spin-slower 46s linear infinite; }
.animate-orbit      { animation:orbit 12s linear infinite; }
.animate-float-y    { animation:float-y 6s ease-in-out infinite; }
.animate-shimmer-x  { animation:shimmer-x 3.5s linear infinite; }

.projects-mesh{
  background:
    radial-gradient(900px 420px at 50% -10%, color-mix(in oklab, var(--primary) 28%, transparent), transparent 60%),
    linear-gradient(180deg, transparent, color-mix(in oklab, var(--foreground) 4%, transparent));
}

/* Shine diagonal en titulares */
.headline-shine{ position:relative; overflow:hidden; }
.headline-shine::after{
  content:""; position:absolute; inset:0; pointer-events:none;
  background: linear-gradient(100deg, transparent 0%, rgba(255,255,255,.12) 40%, transparent 80%);
  transform: translateX(-30%); mix-blend-mode: overlay;
  animation: shimmer-x 3.5s linear infinite;
}

/* Cursor de typing */
.typing-caret::after{
  content:"|"; display:inline-block; margin-left:2px;
  animation: caret-blink 1s step-end infinite;
}

/* Respeto a reduce-motion */
@media (prefers-reduced-motion: reduce){
  .animate-spin-slower,.animate-orbit,.animate-float-y,.animate-shimmer-x{ animation:none !important; }
  .typing-caret::after{ animation:none !important; }
}

/* === Projects HERO (malla sutil + anim) === */
.projects-hero{ position:relative; isolation:isolate; }
.projects-hero__bg{
  position:absolute; inset:0; z-index:-1;
  background:
    radial-gradient(900px 420px at 50% -10%, color-mix(in oklab, var(--primary) 26%, transparent), transparent 60%),
    linear-gradient(180deg, transparent 0%, color-mix(in oklab, var(--foreground) 4%, transparent) 100%),
    repeating-linear-gradient(
      90deg,
      color-mix(in oklab, var(--foreground) 6%, transparent) 0px,
      color-mix(in oklab, var(--foreground) 6%, transparent) 1px,
      transparent 1px,
      transparent 36px
    ),
    repeating-linear-gradient(
      0deg,
      color-mix(in oklab, var(--foreground) 6%, transparent) 0px,
      color-mix(in oklab, var(--foreground) 6%, transparent) 1px,
      transparent 1px,
      transparent 36px
    );
  background-size: auto, auto, 100% 100%, 100% 100%;
  animation: projectsGridShift 22s linear infinite;
  opacity:.9;              /* en el BG, no en el contenedor */
}
@keyframes projectsGridShift{
  0% { background-position: 0 0, 0 0, 0 0, 0 0; }
  50%{ background-position: 0 0, 0 0, 20px 0, 0 20px; }
  100%{ background-position: 0 0, 0 0, 0 0, 0 0; }
}

/* HERO fade-in per word */
.hero-fade span{
  display:inline-block; opacity:0; transform: translateY(12px);
  animation: fadeUp .6s ease forwards;
}
@keyframes fadeUp{ to{ opacity:1; transform: translateY(0); } }

.dark {
  --background: oklch(0.145 0 0);
  --foreground: oklch(0.985 0 0);
  --card: oklch(0.205 0 0);
  --card-foreground: oklch(0.985 0 0);
  --popover: oklch(0.205 0 0);
  --popover-foreground: oklch(0.985 0 0);
  --primary: oklch(0.922 0 0);
  --primary-foreground: oklch(0.205 0 0);
  --secondary: oklch(0.269 0 0);
  --secondary-foreground: oklch(0.985 0 0);
  --muted: oklch(0.269 0 0);
  --muted-foreground: oklch(0.708 0 0);
  --accent: oklch(0.269 0 0);
  --accent-foreground: oklch(0.985 0 0);
  --destructive: oklch(0.704 0.191 22.216);
  --border: oklch(1 0 0 / 10%);
  --input: oklch(1 0 0 / 15%);
  --ring: oklch(0.556 0 0);
  --chart-1: oklch(0.488 0.243 264.376);
  --chart-2: oklch(0.696 0.17 162.48);
  --chart-3: oklch(0.769 0.188 70.08);
  --chart-4: oklch(0.627 0.265 303.9);
  --chart-5: oklch(0.645 0.246 16.439);
  --sidebar: oklch(0.205 0 0);
  --sidebar-foreground: oklch(0.985 0 0);
  --sidebar-primary: oklch(0.488 0.243 264.376);
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.269 0 0);
  --sidebar-accent-foreground: oklch(0.985 0 0);
  --sidebar-border: oklch(1 0 0 / 10%);
  --sidebar-ring: oklch(0.556 0 0);
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    @apply bg-background text-foreground;
  }
}
